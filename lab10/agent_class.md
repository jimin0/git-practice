agent 고기잡는 법


Q. 물을 떠줘. (물에도 온도가 있음)
A. llm은 숫자에 약하고, 디테일에 약함 -> grounding하는 작업들이 요구가됨. 
-> 여기서 grounding을 따로 하고 있지 않아도. ground agent 가능? 
-> 기술의 발전은 기술의 목마름에서부터 시작함
-> 멀티 agent 오케스트라 임. 
-> 두개이상의 agent를 협력해보자


멀티 agent의 관리자를 ground역할을 많이 쓰고있음.

답변을 만들때 할루시네인션이 있는지 확인하기 위해 "할루시네이션 체커" 
사람을 모방한 agent가 가능하게 됨

멀티 agent : 하나의 pipline에 여러개의 agent를 붙이면됨.




function calling : 지정한 prompt로 도구를선택가능 

langchain 은 @tool데코레이트하면 됨 

웹검색-> 튜닝을 함->tool 데코레이트 달고 -> 코맨트로 너 이거 웹검색할때 써줘


전제조건 : 정의를 해줘야함. agent에 대한걸. 

자 새로운 도구지? 커피라고 생각하면되는데, 데우면되고, 커피처럼 맛이 좀 다르다고 생각하면돼.


Q. 멀티 agent -> 강화학습으로 확장가능할까?
agent라는걸 보상이라는 개념을 넣어서 쓰기도하는데, 비용측면이 만이듦. 연구중인거라함...아직은


Q. agent와 function call의 차이점?
-> function call 이라는 건 도구를 지어주는거까지임.
-> 생각하고 -> action -> 도구 결과 (Llop)는 다른 agent 로직임.


도구 바인딩은 function calling임.
도구를 줬다(도구 어떤 걸 써야해, 웹검색 도구를 써야겠습니다.) ->agnet에 대해서 너무 협소하게 


Q. 어떤도구를 사용해야할까 판별부분


agent cycle  = Thougt "어떤 도구를 사용해야할까"  -> Action "도구 호출" -> Observation "도구호출결과" -> logs (loop)


action : 

검색결과를보고 원래 사용자의 질문에 답을 할수있는지 보고 답변을 함
이과정을 Looping하.ㅁ


이 아들에게 도구를 줬지만, 도구를 안써도 되는거면 일반 llm을 태우는거임. 왜냐면 thought단계에서 판단.


Q. 무조건적으로 이렇게 일어난다. Langchain의 agent를 쓰면 


Q. 도구가 수천개로 되어있으면, 하이라킬ㄱ컬하게 하게 가능하나?
prompt로 들어가기 때문에 오차가 들어가있음. 


Q. agnet는 함수명, description이 들어감.


Q. 도구 호출이 일어난 위치는 "내 로컬임" -> 도구 호출은 내 pc에서 일어남.
- 첫시발점은 내컴퓨터
- 그걸 ssh로 호출하게 tool로 할수있음.
- prompting으로 프로세스에 대한 걸 강제할수이승ㅁ
- 오류가 낫을때만 재시작아님
- 할루시네이션의 전제조건을 Llm이 판단? -> 그걸 평가하는 조건은 사람이 해햐암...
- 사람이 매번 평가할수없음...
Thout : 어떤 함수를 실행시킬건지어떤 도구를 써야하는지 결정은 open ai 가 알려줌. 

Q. 무한루프?
A. 몇번 돌지 선택할수있음.


Q. 병렬로 처리할수있지만
A. 보통은 순차적으로 할수있음.


A. loop가 일어나려면, 도구 사용법을 학습한 llm이 있고 아닌 llm이 있음.


Q. 학습은 파인튜닝
A. 도구 호출과 도구 호출결과 부분 빼고 다 서버딴에서 실행됨. 즉, 함수를 실행하는 부분만 우리피씨를 씀.



즉, 뭐만 필요해? 함수명, 함수에 어떤 인자 넣어줄지 필요.
여기 넣어주는 인자를 llm이 가공할수있음.

나는 교보문고에서 it과학이나 과학 여러ㅏ가지 카테고리가잇음.
함수에 카테고리를 넣어줘야함. 파라미터에. 

반드시.

함수안에 넣어줄때인자로 rag면 Rag, agent로 넣어야함.

질문에는 사용자가 친절하게 prompt 입력하지 않음^^
함수에 넣어야하는 인자 뭐 써야해?

보정해서 rag로 해서 넣어보자.


google:reddit.com -> 도메인한정 검색하는 기능있음.
human in the loop -> 해서 사람이 개입가능


agent를 돌리면 결과가 다나옴. 
웹검색해슨ㄴ지 멀 검색해ㅅ는지 다나옴


되돌아가서 검색하는 쿼리를 조정하는기능 : replay가능 replay기능이 있음.





rag어려운거

1. 사내 문서를 했는데, 맛집을 물어봄. 
2. agent는 rout를 함. 
3. 문서 검색 옵션을 줌
4. langchain이 이걸 쓰기 쉽게 패키징함.
5. agent 는 프레밍ㅁ워크임
6. 직접 구현도 가ㅡㄴㅇ하긴함.
7. rout는 랭체인 고유도구아님.

 

*Agent prompt
1. step을 순서대로 명시
2. 


LLM은 원 스탭
aagent : loop





Q. Ollama Tool support
- Ollama : 오픈소스 모델을 양자화해서 지원하게함
- Ollama 에서 Agent Tool을 사용하겠끔 지원한다고함.(원래는 gpt에서만 가능했음.)
- Ollama 에서 7/25에 새롭게 지원햇엇음
- llama 3.1가능함.
- 사실 더 많아졋지만 ,function calling을 쓰려면, 기존모델에 파인튜닝시키면 됨
도구호출할수있게 파인튜닝하는 추세이긴함.


gpt, claude, 튜토리얼, gemini(무료), ollama, mistreal



즉, 이미 학습된 모델을 쓸거다!!!


학습방법이나 doc있을까?
finetuning할수이있는 방법은 굉장히 많음. 얼마나 데이터가 많냐. 
langchian을 사용하는 llm을 맞게끔 finetuning하고시음. ^^ -> 실제로는 어려움.
토종모델을(한국모델) 성공 케이스가 없음.

도구호출할때 굳이 한국어가 필요갈 이유가없음. 
굳이굳이 파인튜닝을 쓰는 경우는 거의 없음.









